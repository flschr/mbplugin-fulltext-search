{{- $params := .Get "text" -}}
{{- $years := 0 -}}
{{- $count := 0 -}}
{{- $posts := where .Site.RegularPages "Type" "post" -}}
{{- $count = len $posts -}}
{{- if gt $count 0 -}}
  {{- $sorted := sort $posts "Date" "asc" -}}
  {{- $first := index $sorted 0 -}}
  {{- $startYear := $first.Date.Year -}}
  {{- $years = sub (now.Year) $startYear -}}
{{- end -}}
{{- $context := dict "text" $params "years" $years "count" $count -}}
<p>{{ partial "search_intro_content.html" $context }}</p>
